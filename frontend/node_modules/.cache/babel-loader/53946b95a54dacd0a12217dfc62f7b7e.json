{"ast":null,"code":"var _jsxFileName = \"/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/src/App.tsx\";\nimport fs from 'fs';\nimport Handlebars from \"handlebars\";\nimport path from 'path';\nimport { Component } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar oldHref = \"http://localhost:3000\";\n\nclass App extends Component {\n  constructor(_ref) {\n    let {} = _ref;\n    super({});\n    this.templateDir = 'resources/html';\n    this.state = {\n      cells: [{\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=2\"\n      }],\n      template: this.loadTemplate('main')\n    };\n    console.log(this.state.template);\n  }\n\n  loadTemplate(name) {\n    const file = path.join(this.templateDir, name + '.hbs');\n    const filecontent = fs.readFileSync(file, 'utf8');\n    return Handlebars.compile(filecontent, {});\n  }\n\n  convertToCell(p) {\n    const newCells = [];\n\n    for (var i = 0; i < p[\"cells\"].length; i++) {\n      var c = {\n        text: p[\"cells\"][i][\"text\"],\n        clazz: p[\"cells\"][i][\"clazz\"],\n        link: p[\"cells\"][i][\"link\"]\n      };\n      newCells.push(c);\n    }\n\n    return newCells;\n  }\n\n  async newGame() {\n    const response = await fetch('newgame');\n    const json = await response.json();\n    const newCells = this.convertToCell(json);\n    this.setState({\n      cells: newCells\n    });\n  }\n\n  async play(url) {\n    const href = \"play?\" + url.split('?')[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    const newCells = this.convertToCell(json);\n    this.setState({\n      cells: newCells\n    });\n  }\n\n  async move() {\n    if (window.location.href === \"http://localhost:3000/newgame\" && oldHref !== window.location.href) {\n      this.newGame();\n      oldHref = window.location.href;\n    } else if (window.location.href.split('?')[0] === \"http://localhost:3000/play\" && oldHref !== window.location.href) {\n      this.play(window.location.href);\n      oldHref = window.location.href;\n    }\n  }\n\n  render() {\n    this.move();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.template({\n            cells: this.state.cells\n          })\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/src/App.tsx"],"names":["fs","Handlebars","path","Component","oldHref","App","constructor","templateDir","state","cells","text","clazz","link","template","loadTemplate","console","log","name","file","join","filecontent","readFileSync","compile","convertToCell","p","newCells","i","length","c","push","newGame","response","fetch","json","setState","play","url","href","split","move","window","location","render","__html"],"mappings":"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","sourcesContent":["import fs from 'fs'\nimport Handlebars from \"handlebars\"\nimport path from 'path'\nimport { Component } from 'react'\nimport './App.css'\n\nvar oldHref = \"http://localhost:3000\"\n\ninterface Cell {\n  text: String,\n  clazz: String,\n  link: String\n}\n\ninterface Cells {\n  cells: Array<Cell>,\n  template: HandlebarsTemplateDelegate<any>\n}\n\nclass App extends Component<{}, Cells> {\n  templateDir = 'resources/html'\n\n  constructor({}) {\n    super({});\n    this.state = {\n      cells: [{ text: \"\", clazz: \"playable\", link: \"/play?x=0&y=0\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=1&y=0\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=2&y=0\"},\n              { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=1\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=1&y=1\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=2&y=1\"},\n              { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=2\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=1&y=2\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=2&y=2\"}],\n      template: this.loadTemplate('main')\n    }\n    console.log(this.state.template)\n  }\n\n  loadTemplate (name: string): HandlebarsTemplateDelegate<any> {\n    const file = path.join(this.templateDir, name + '.hbs')\n    const filecontent = fs.readFileSync(file, 'utf8')\n    return Handlebars.compile(filecontent, {})\n  }\n\n  convertToCell(p: any): Array<Cell> {\n    const newCells: Array<Cell> = []\n    for (var i=0; i < p[\"cells\"].length; i++) {\n      var c: Cell = {text: p[\"cells\"][i][\"text\"], clazz: p[\"cells\"][i][\"clazz\"], link: p[\"cells\"][i][\"link\"]}\n      newCells.push(c)\n    }\n\n    return newCells\n  };\n\n  async newGame() {\n    const response = await fetch('newgame')\n    const json = await response.json()\n\n    const newCells: Array<Cell> = this.convertToCell(json)\n    this.setState({cells: newCells})\n  };\n\n  async play(url: String) {\n    const href = \"play?\" + url.split('?')[1]\n    const response = await fetch(href)\n    const json = await response.json()\n\n    const newCells: Array<Cell> = this.convertToCell(json)\n    this.setState({cells: newCells})\n  }\n\n  async move() {\n    if (window.location.href === \"http://localhost:3000/newgame\" && oldHref !== window.location.href) {\n      this.newGame()\n      oldHref = window.location.href\n    } else if (window.location.href.split('?')[0] === \"http://localhost:3000/play\" && oldHref !== window.location.href) {\n      this.play(window.location.href)\n      oldHref = window.location.href\n    }\n  }\n\n  render() {\n    this.move()\n    return (\n      <div className=\"App\">\n        <div dangerouslySetInnerHTML={{ __html: this.state.template({cells: this.state.cells}) }} />\n      </div>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}