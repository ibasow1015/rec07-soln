{"ast":null,"code":"import _asyncToGenerator from\"/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectDestructuringEmpty from\"/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import _classCallCheck from\"/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/node_modules/@babel/runtime/regenerator/index.js\";import fs from'fs';import Handlebars from\"handlebars\";import{Component}from'react';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";var oldHref=\"http://localhost:3000\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(_ref){var _this;_objectDestructuringEmpty(_ref);_classCallCheck(this,App);_this=_super.call(this,{});_this.templateDir='resources/html/main.hbs';_this.state={cells:[{text:\"\",clazz:\"playable\",link:\"/play?x=0&y=0\"},{text:\"\",clazz:\"playable\",link:\"/play?x=1&y=0\"},{text:\"\",clazz:\"playable\",link:\"/play?x=2&y=0\"},{text:\"\",clazz:\"playable\",link:\"/play?x=0&y=1\"},{text:\"\",clazz:\"playable\",link:\"/play?x=1&y=1\"},{text:\"\",clazz:\"playable\",link:\"/play?x=2&y=1\"},{text:\"\",clazz:\"playable\",link:\"/play?x=0&y=2\"},{text:\"\",clazz:\"playable\",link:\"/play?x=1&y=2\"},{text:\"\",clazz:\"playable\",link:\"/play?x=2&y=2\"}],template:_this.loadTemplate('main')};console.log(_this.state.template);return _this;}_createClass(App,[{key:\"loadTemplate\",value:function loadTemplate(name){var filecontent=fs.readFileSync(this.templateDir,'utf8');return Handlebars.compile(filecontent,{});}},{key:\"convertToCell\",value:function convertToCell(p){var newCells=[];for(var i=0;i<p[\"cells\"].length;i++){var c={text:p[\"cells\"][i][\"text\"],clazz:p[\"cells\"][i][\"clazz\"],link:p[\"cells\"][i][\"link\"]};newCells.push(c);}return newCells;}},{key:\"newGame\",value:function(){var _newGame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,json,newCells;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('newgame');case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;newCells=this.convertToCell(json);this.setState({cells:newCells});case 8:case\"end\":return _context.stop();}}},_callee,this);}));function newGame(){return _newGame.apply(this,arguments);}return newGame;}()},{key:\"play\",value:function(){var _play=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url){var href,response,json,newCells;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:href=\"play?\"+url.split('?')[1];_context2.next=3;return fetch(href);case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:json=_context2.sent;newCells=this.convertToCell(json);this.setState({cells:newCells});case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function play(_x){return _play.apply(this,arguments);}return play;}()},{key:\"move\",value:function(){var _move=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(window.location.href===\"http://localhost:3000/newgame\"&&oldHref!==window.location.href){this.newGame();oldHref=window.location.href;}else if(window.location.href.split('?')[0]===\"http://localhost:3000/play\"&&oldHref!==window.location.href){this.play(window.location.href);oldHref=window.location.href;}case 1:case\"end\":return _context3.stop();}}},_callee3,this);}));function move(){return _move.apply(this,arguments);}return move;}()},{key:\"render\",value:function render(){this.move();return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:this.state.template({cells:this.state.cells})}})});}}]);return App;}(Component);;export default App;","map":{"version":3,"sources":["/Users/isabelbasow/Desktop/17-214/new-rec07-gui/frontend/src/App.tsx"],"names":["fs","Handlebars","Component","oldHref","App","templateDir","state","cells","text","clazz","link","template","loadTemplate","console","log","name","filecontent","readFileSync","compile","p","newCells","i","length","c","push","fetch","response","json","convertToCell","setState","url","href","split","window","location","newGame","play","move","__html"],"mappings":"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","sourcesContent":["import fs from 'fs'\nimport Handlebars from \"handlebars\"\nimport path from 'path'\nimport { Component } from 'react'\nimport './App.css'\n\nvar oldHref = \"http://localhost:3000\"\n\ninterface Cell {\n  text: String,\n  clazz: String,\n  link: String\n}\n\ninterface Cells {\n  cells: Array<Cell>,\n  template: HandlebarsTemplateDelegate<any>\n}\n\nclass App extends Component<{}, Cells> {\n  templateDir = 'resources/html/main.hbs';\n\n  constructor({}) {\n    super({});\n    this.state = {\n      cells: [{ text: \"\", clazz: \"playable\", link: \"/play?x=0&y=0\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=1&y=0\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=2&y=0\"},\n              { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=1\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=1&y=1\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=2&y=1\"},\n              { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=2\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=1&y=2\"},{ text: \"\", clazz: \"playable\", link: \"/play?x=2&y=2\"}],\n      template: this.loadTemplate('main')\n    };\n    console.log(this.state.template);\n  }\n\n  loadTemplate (name: string): HandlebarsTemplateDelegate<any> {\n    const filecontent = fs.readFileSync(this.templateDir, 'utf8');\n    return Handlebars.compile(filecontent, {});\n  }\n\n  convertToCell(p: any): Array<Cell> {\n    const newCells: Array<Cell> = [];\n    for (var i=0; i < p[\"cells\"].length; i++) {\n      var c: Cell = {text: p[\"cells\"][i][\"text\"], clazz: p[\"cells\"][i][\"clazz\"], link: p[\"cells\"][i][\"link\"]};\n      newCells.push(c);\n    }\n\n    return newCells;\n  };\n\n  async newGame() {\n    const response = await fetch('newgame');\n    const json = await response.json();\n\n    const newCells: Array<Cell> = this.convertToCell(json);\n    this.setState({cells: newCells});\n  };\n\n  async play(url: String) {\n    const href = \"play?\" + url.split('?')[1];\n    const response = await fetch(href);\n    const json = await response.json();\n\n    const newCells: Array<Cell> = this.convertToCell(json);\n    this.setState({cells: newCells});\n  };\n\n  async move() {\n    if (window.location.href === \"http://localhost:3000/newgame\" && oldHref !== window.location.href) {\n      this.newGame();\n      oldHref = window.location.href;\n    } else if (window.location.href.split('?')[0] === \"http://localhost:3000/play\" && oldHref !== window.location.href) {\n      this.play(window.location.href);\n      oldHref = window.location.href;\n    }\n  };\n\n  render() {\n    this.move()\n    return (\n      <div className=\"App\">\n        <div dangerouslySetInnerHTML={{ __html: this.state.template({cells: this.state.cells}) }} />\n      </div>\n    )\n  };\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}